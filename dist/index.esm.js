import e from"js-cookie";const t=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|17[0-9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;const n=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;const r=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;const o=/^([1-9]{1})(\d{14}|\d{18})$/;const a=/^[u4e00-u9fa5]$/;const s=/^[A-Za-z]*$/;const c=/^(https?:|mailto:|tel:)$/;const i=/^[\u4e00-\u9fa5a-zA-Z0-9]{1,50}$/;const l=/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*()_+\.])[A-Za-z0-9!@#$%^&*()_+\.]{8,20}$/;var u,d=Object.freeze({__proto__:null,TelRegExp:t,ValidatorTel:function(e){return t.test(e)},EmailRegExp:n,ValidatorEmail:function(e){return n.test(e)},IdCardRegExp:r,ValidatorIdCard:function(e){return r.test(e)},BankCardRegExp:o,ValidatorBankCard:function(e){return o.test(e)},ChineseRegExp:a,ValidatorChinese:function(e){return a.test(e)},LetterRegExp:s,ValidatorLetter:function(e){return s.test(e)},UrlRegExp:c,ValidatorUrl:function(e){return c.test(e)},CCARegExp:i,ValidatorCCA:function(e){return i.test(e)},PswRegExp:l,ValidatorPsw:function(e){return l.test(e)}});!function(e){e.excel="application/vnd.ms-excel",e.xls="application/vnd.ms-excel",e.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.pdf="application/pdf",e.doc="application/msword",e.docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.zip="application/zip",e.rar="application/rar",e.png="image/png",e.webp="image/webp",e.bmp="image/bmp",e.jpeg="image/jpeg",e.gif="image/gif",e.tiff="image/tiff",e.svg="image/svg+xml",e.mp4="video/mp4"}(u||(u={}));var h=Object.freeze({__proto__:null,tagADownload:function(e){const{url:t="",title:n="",target:r="_blank"}=e,o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",n),o.setAttribute("target",r),document.body.appendChild(o),o.click(),document.body.removeChild(o)},downloadBlobFile:(e,t,n)=>{const r=n?new Blob([e],{type:u[n]}):new Blob([e]);if("download"in document.createElement("a")){const e=document.createElement("a");e.download=t,e.style.display="none",e.href=URL.createObjectURL(r),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}},previewPdf:(e,t=!0)=>{const n=new Blob([e],{type:"application/pdf"});if("download"in document.createElement("a")){const e=document.createElement("a");e.style.display="none",e.href=`${URL.createObjectURL(n)}${t?"#scrollbars=0&toolbar=0&statusbar=0":""}`,e.target="_blank",document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}},previewImage:e=>{if("download"in document.createElement("a")){const t=document.createElement("a");t.style.display="none",t.href=URL.createObjectURL(e),t.target="_blank",document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}},convertSize:e=>{if(null===e||""===e)return"0Kb";let t=0;const n=parseFloat(e);t=Math.floor(Math.log(n)/Math.log(1024));return(n/Math.pow(1024,t)).toFixed(2)+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},getFileExtension:e=>{const t=e.lastIndexOf(".");return e.substring(t+1)?.toLowerCase()||""}});var f=Object.freeze({__proto__:null,getCache:function(t,n="local"){let r;switch(n){case"cookie":r=e.get(t);break;case"session":const n=sessionStorage.getItem(t)||"";try{r=JSON.parse(n)}catch(e){r=n}break;default:const o=localStorage.getItem(t)||"";try{r=JSON.parse(o)}catch(e){r=o}}return r},setCache:function(t,n,r="local"){switch(r){case"cookie":e.set(t,n,{expires:7});break;case"session":sessionStorage.setItem(t,JSON.stringify(n));break;default:localStorage.setItem(t,JSON.stringify(n))}},clearCache:function(t,n="local"){switch(n){case"cookie":e.remove(t);break;case"session":sessionStorage.removeItem(t);break;default:localStorage.removeItem(t)}},clearAll:function(t="local",n){switch(t){case"cookie":n?.forEach((t=>e.remove(t)));break;case"session":sessionStorage.clear();break;default:localStorage.clear()}}});var p=Object.freeze({__proto__:null,deepFind:function e(t,n){const r=t instanceof Array?t:[t];for(let t=0;t<r.length;t++){if(n(r[t]))return r[t];{const o=e(r[t].children||[],n);if(o)return o}}},deepFindPath:function e(t,n,r=[]){const o=t instanceof Array?t:[t];for(let t=0;t<o.length;t++){if(n(o[t]))return r.push(o[t]),r;if(e(o[t].children||[],n,r))return r.push(o[t]),r}},findFirstNode:function e(t,n,r=[]){const o=t instanceof Array?t:[t];for(let t=0;t<o.length;t++)n(o[t])&&r.push(o[t]),o[t].children&&e(o[t].children,n,r);return r[0]},deepTraversal:function e(t,n,r=[]){const o=t instanceof Array?t:[t];for(let t=0;t<o.length;t++)n&&!n(o[t])||r.push(o[t]),o[t].children&&e(o[t].children||[],n,r);return r},wideTraversal:function e(t,n,r=[]){const o=t instanceof Array?t:[t],a=[];for(let t=0;t<o.length;t++)n&&!n(o[t])||r.push(o[t]),o[t].children&&a.push(...o[t].children),o.length===t+1&&e(a,n,r);return r},getTreeLeaf:function e(t,n=[]){return Array.isArray(t)?t.forEach((t=>{t.children&&t.children.length?e(t.children,n):n.push(t)})):t?.children?.length?e(t.children,n):n.push(t),n},getParentIdsByTreeId:(e,t,n)=>{if(!e||!Array.isArray(e)||!t)return[];const{children:r="children",id:o="id"}=n||{},a=(e,t)=>e.reduce(((e,n)=>{const s=n[r];return[...e,t?{...n,parentId:t}:n,...s&&s.length?a(s,n[o]):[]]}),[]);return(e=>{let n=[t],r=e.find((e=>e[o]===t));for(;r&&r.parentId;)n=[r.parentId,...n],r=e.find((e=>e[o]===r.parentId));return n})(a(e))},flatToList:function e(t,n=[],r="0"){if(Array.isArray(t))t.forEach((t=>{const{children:o,...a}=t;n.push({...a,parentId:r}),o&&o.length&&e(o,n,t.id)}));else{const{children:o,...a}=t;n.push({...a,parentId:r}),o&&o.length&&e(o,n,t.id)}return n},flatToTree:function(e,t={idKey:"id",parentKey:"parentId",childrenKey:"children"}){const{idKey:n,parentKey:r,childrenKey:o}=t,a=[],s={};return e.forEach((e=>{s[e[n]]={...e,[o]:[]}})),e.forEach((e=>{const t=e[r];void 0!==t&&s[t]?s[t][o].push(s[e[n]]):a.push(s[e[n]])})),a}});const m=[];let b=0;function g(e,t){m.filter((t=>t.type===e)).forEach((e=>e.action(t)))}var w=Object.freeze({__proto__:null,subscribe:(e,t)=>{m.push({type:e,action:t})},unsubscribe:e=>{const t=m.findIndex((t=>t.action===e));m.splice(t,1)},execAction:g,initWS:(e,t,n)=>{if(!("WebSocket"in window))return b++,g("wsError",{hasError:!0,errorCounter:b,name:"BrowserError",errMessage:"您的浏览器不支持WebSocket"}),null;try{const r=new WebSocket(e);return r.onopen=()=>{window.console.info("websocket连接成功...")},r.onmessage=e=>{t&&t(e),g("all",e.data)},r.onclose=()=>{g("wsClose"),window.console.info("websocket断开连接...")},r.onerror=e=>{window.console.info("websocket连接异常..."),n&&n(e),g("wsError",{hasError:!0,errorCounter:b,name:"connectionError",errMessage:`无法连接到: ${e?.target?.url}`,err:e})},r}catch(e){return b++,g("wsError",{hasError:!0,errorCounter:b,name:e?.name,errMessage:e?.message,err:e}),null}}});var y=Object.freeze({__proto__:null,convertToChinese:function(e){if(e){const t=["零","一","二","三","四","五","六","七","八","九"],n=["","十","百","千","万"],r=parseInt(e,10);if(!r)return"未知";const o=e=>{const r=e.toString().split("").reverse();let o="";const a=[];r.forEach(((e,r)=>{a.unshift("0"===e?t[Number(e)]:t[Number(e)]+n[r])}));const s=[];return a.forEach(((e,t)=>{"零"!==e&&s.push(t)})),a.length>1?a.forEach(((e,t)=>{"零"===a[a.length-1]?t<=s[s.length-1]&&(o+=e):o+=e})):o=a[0],o},a=Math.floor(r/1e4);let s=r%1e4;return s.toString().length<4&&(s=`0${s}`),a?`${o(a)}万${o(s)}`:o(r)}return"一"},thousand:function(e){return(e||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")},getRandomNumber:function(e,t,n){const{toFixed:r=0}=n??{};return Number((Math.random()*(t-e)+e).toFixed(r))}});function M(){return document.fullscreenElement||!1}var v=Object.freeze({__proto__:null,fullscreen:function(e){e.requestFullscreen()},exitFullscreen:function(){M()&&document.exitFullscreen()},fullscreenEnabled:function(){return document.fullscreenEnabled},isFullscreen:M,fullScreenListener:function(e,t){document[e]("fullscreenchange",t)},copyToClipboard:async function(e){if(!navigator.clipboard)return function(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.width="2em",t.style.height="2em",t.style.padding="0px",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",document.body.appendChild(t),t.focus(),t.select();try{const e=document.execCommand("copy")?"successful":"unsuccessful";console.log(`Fallback: Copying text command was ${e}`)}catch(e){console.error("Fallback: unable to copy",e)}document.body.removeChild(t)}(e),!0;try{return await navigator.clipboard.writeText(e),!0}catch(e){return!1}},pasteFromClipboard:async function(){if(!navigator.clipboard)return document.execCommand("paste"),null;try{return await navigator.clipboard.readText()}catch(e){return null}}});class x{dbName;version;dbInstance;constructor(e,t){this.dbName=e,this.version=t||1,this.dbInstance=null,this.__init()}async __init(){window.indexedDB?this.dbInstance=await this.openDB():console.error("Your browser doesn't support a stable version of IndexedDB.")}openDB(){return new Promise(((e,t)=>{if(this.dbInstance)e(this.dbInstance);else{let n;const r=window.indexedDB.open(this.dbName,this.version);r.onsuccess=t=>{n=t.target.result,e(n)},r.onerror=e=>{t(e)},r.onupgradeneeded=e=>{n=e.target.result;const t=this.dbName;n.createObjectStore(t,{keyPath:"id",autoIncrement:!1})}}}))}put(e,t){return new Promise(((n,r)=>{const o=this.dbInstance.transaction([e],"readwrite").objectStore(e).add(t);o.onsuccess=()=>{n(o.result)},o.onerror=e=>{r(e)}}))}update(e,t){return new Promise(((n,r)=>{const o=this.dbInstance.transaction([e],"readwrite").objectStore(e).put(t);o.onsuccess=()=>{n(o.result)},o.onerror=e=>{r(e)}}))}get(e,t){return new Promise(((n,r)=>{const o=this.dbInstance.transaction([e]).objectStore(e).get(t);o.onsuccess=()=>{n(o.result)},o.onerror=e=>{r(e)}}))}remove(e,t){return new Promise(((n,r)=>{const o=this.dbInstance.transaction([e],"readwrite").objectStore(e).delete(t);o.onsuccess=()=>{n(o.result)},o.onerror=e=>{r(e)}}))}closeDB(){this.dbInstance.close()}deleteDB(e){return new Promise(((t,n)=>{const r=window.indexedDB.deleteDatabase(e);r.onsuccess=()=>{t(r.result)},r.onerror=e=>{n(e)}}))}}const _=52.35987755982988,E=3.141592653589793,k=6378137,C=.006693421622965943,I=(e,t)=>{const n=+t,r=+e;let o=2*r-100+3*n+.2*n*n+.1*r*n+.2*Math.sqrt(Math.abs(r));return o+=2*(20*Math.sin(6*r*E)+20*Math.sin(2*r*E))/3,o+=2*(20*Math.sin(n*E)+40*Math.sin(n/3*E))/3,o+=2*(160*Math.sin(n/12*E)+320*Math.sin(n*E/30))/3,o},S=(e,t)=>{const n=+t,r=+e;let o=300+r+2*n+.1*r*r+.1*r*n+.1*Math.sqrt(Math.abs(r));return o+=2*(20*Math.sin(6*r*E)+20*Math.sin(2*r*E))/3,o+=2*(20*Math.sin(r*E)+40*Math.sin(r/3*E))/3,o+=2*(150*Math.sin(r/12*E)+300*Math.sin(r/30*E))/3,o},j=(e,t)=>{const n=+t,r=+e;return!(r>73.66&&r<135.05&&n>3.86&&n<53.55)};var B=Object.freeze({__proto__:null,bd09togcj02:(e,t)=>{const n=+e-.0065,r=+t-.006,o=Math.sqrt(n*n+r*r)-2e-5*Math.sin(r*_),a=Math.atan2(r,n)-3e-6*Math.cos(n*_);return[o*Math.cos(a),o*Math.sin(a)]},gcj02tobd09:(e,t)=>{const n=+t,r=+e,o=Math.sqrt(r*r+n*n)+2e-5*Math.sin(n*_),a=Math.atan2(n,r)+3e-6*Math.cos(r*_);return[o*Math.cos(a)+.0065,o*Math.sin(a)+.006]},wgs84togcj02:(e,t)=>{const n=+t,r=+e;if(j(r,n))return[r,n];{let e=I(r-105,n-35),t=S(r-105,n-35);const o=n/180*E;let a=Math.sin(o);a=1-C*a*a;const s=Math.sqrt(a);e=180*e/(6335445.439889961/(a*s)*E),t=180*t/(k/s*Math.cos(o)*E);return[r+t,n+e]}},gcj02towgs84:(e,t)=>{const n=+t,r=+e;if(j(r,n))return[r,n];{let e=I(r-105,n-35),t=S(r-105,n-35);const o=n/180*E;let a=Math.sin(o);a=1-C*a*a;const s=Math.sqrt(a);e=180*e/(6335445.439889961/(a*s)*E),t=180*t/(k/s*Math.cos(o)*E);return[2*r-(r+t),2*n-(n+e)]}},outOfChina:j,lonLatToMercator:(e,t)=>{const n=+t,r=+e*k*E/180;let o=Math.log(Math.tan((90+n)*E/360))/(E/180);return o=o*k*E/180,[r,o]},mercatorToLonLat:(e,t)=>{const n=+e/(k*E)*180;let r=+t/(k*E)*180;return r=180/E*(2*Math.atan(Math.exp(r*E/180))-E/2),[n,r]}});var A=Object.freeze({__proto__:null,asyncPool:async function(e,t,n){const r=[],o=new Set;for(const a of t){const s=Promise.resolve().then((()=>n(a,t))).finally((()=>o.delete(s)));r.push(s),o.add(s),o.size>=e&&await Promise.race(o)}return Promise.all(r)}});function O(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function R(e){return new Function("return "+e)()}function $(e,t){return((e,t)=>{const n={};return e.forEach((e=>{const r=t(e)||"未知";n[r]=n[r]||[],n[r].push(e)})),Object.keys(n).map((e=>({label:e,data:n[e]})))})(e,(e=>e[t]))}export{x as IndexDB,w as SocketEmitter,f as cache,B as coordTransform,R as evil,h as file,d as formTest,v as fscHelper,$ as groupByField,A as http,y as numHelper,p as treeHelper,O as uuid};
